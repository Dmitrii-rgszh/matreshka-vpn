<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
  
  <!-- Telegram WebApp —Å—Ç–∏–ª–∏ -->
  <meta name="telegram-web-app" content="true" />
  <meta name="theme-color" content="#1a1a2e" />
  <meta name="color-scheme" content="dark light" />
  
  <!-- –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
  <title>–†—É—ÅVPN - –ó–∞—â–∏—Ç–∞ —Å –¥—É—à–æ–π</title>
  <meta name="description" content="–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π VPN —Å —Ä—É—Å—Å–∫–æ–π –¥—É—à–æ–π. –ü–æ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å –∫ —Å–µ—Ä–≤–µ—Ä–∞–º –ø–æ –≤—Å–µ–º—É –º–∏—Ä—É —á–µ—Ä–µ–∑ Telegram." />
  <meta name="keywords" content="VPN, Telegram, –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å, –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å, –†–æ—Å—Å–∏—è" />
  
  <!-- Open Graph –¥–ª—è Telegram -->
  <meta property="og:title" content="–†—É—ÅVPN - –ó–∞—â–∏—Ç–∞ —Å –¥—É—à–æ–π" />
  <meta property="og:description" content="–ë–µ–∑–æ–ø–∞—Å–Ω—ã–π VPN —á–µ—Ä–µ–∑ Telegram WebApp" />
  <meta property="og:type" content="website" />
  <meta property="og:image" content="/matreshka-logo.png" />
  
  <!-- –ò–∫–æ–Ω–∫–∏ -->
  <link rel="icon" type="image/png" href="/favicon.ico" />
  <link rel="apple-touch-icon" href="/matreshka-logo.png" />
  
  <!-- –ü—Ä–µ–¥–∑–∞–≥—Ä—É–∑–∫–∞ —à—Ä–∏—Ñ—Ç–æ–≤ -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  
  <!-- Telegram WebApp Script -->
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  
  <style>
    /* –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è FOUC */
    body {
      margin: 0;
      padding: 0;
      background: #1a1a2e;
      color: #ffffff;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      overflow-x: hidden;
    }
    
    #root {
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    
    /* –ü—Ä–µ–ª–æ–∞–¥–µ—Ä –≤ —Ç–æ–º –∂–µ —Å—Ç–∏–ª–µ —á—Ç–æ –∏ –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ */
    .app-preloader {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #FF6B6B 0%, #DC143C 50%, #8B0000 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease;
      overflow: hidden;
    }

    /* –ü—Ä–æ—Å—Ç—ã–µ –¥–µ–∫–æ—Ä–∞—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω—ã—Ö SVG */
    .app-preloader::before {
      content: '‚ú¶ ‚úß ‚ú¶ ‚úß ‚ú¶ ‚úß ‚ú¶ ‚úß ‚ú¶';
      position: absolute;
      top: 20px;
      left: 0;
      right: 0;
      text-align: center;
      color: #FFD700;
      font-size: 16px;
      opacity: 0.4;
      z-index: 1;
    }

    .app-preloader::after {
      content: '‚úß ‚ú¶ ‚úß ‚ú¶ ‚úß ‚ú¶ ‚úß ‚ú¶ ‚úß';
      position: absolute;
      bottom: 20px;
      left: 0;
      right: 0;
      text-align: center;
      color: #FFD700;
      font-size: 16px;
      opacity: 0.4;
      z-index: 1;
    }
    
    .preloader-content {
      position: relative;
      z-index: 2;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    /* –õ–æ–≥–æ—Ç–∏–ø —Å —Ä–∞–º–∫–æ–π –∫–∞–∫ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π */
    .preloader-logo-container {
      background: radial-gradient(circle, rgba(255, 215, 0, 0.15) 0%, transparent 70%);
      border-radius: 50%;
      padding: 15px;
      margin-bottom: 20px;
      border: 2px solid #FFD700;
      box-shadow: 0 0 25px rgba(255, 215, 0, 0.3);
    }
    
    .preloader-logo {
      font-size: 60px;
      animation: preloader-float 2s ease-in-out infinite;
      filter: drop-shadow(0 0 15px #FFD700);
      position: relative;
    }

    .preloader-logo::after {
      content: 'üï∂Ô∏è';
      position: absolute;
      top: 5px;
      left: 12px;
      font-size: 30px;
      filter: drop-shadow(0 0 8px #FFD700);
    }
    
    /* –ù–∞–∑–≤–∞–Ω–∏–µ –≤ —Ç–æ–º –∂–µ —Å—Ç–∏–ª–µ */
    .preloader-text {
      font-size: 28px;
      font-weight: 700;
      color: #FFFFFF;
      margin-bottom: 8px;
      text-align: center;
      text-shadow: 2px 2px 8px #8B0000, 0 0 20px rgba(255, 215, 0, 0.3);
      letter-spacing: 1px;
    }
    
    .preloader-subtitle {
      font-size: 16px;
      color: #FFF8DC;
      text-align: center;
      margin-bottom: 30px;
      text-shadow: 1px 1px 2px #8B0000;
    }
    
    /* –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è PNG –∏–∫–æ–Ω–∫–∏ - —É–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤ 1.5 —Ä–∞–∑–∞ */
    .preloader-spinner {
      width: 75px;
      height: 75px;
      margin: 20px auto 0;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è PNG - –º–µ–¥–ª–µ–Ω–Ω–µ–µ –≤—Ä–∞—â–µ–Ω–∏–µ */
    .loading-png {
      width: 100%;
      height: 100%;
      animation: spin 3s linear infinite;
      filter: brightness(0) invert(1) drop-shadow(0 0 15px #FFFFFF);
    }

    /* –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è - –±–æ–ª—å—à–µ —Ä–∞–∑–º–µ—Ä */
    .loading-glow {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90px;
      height: 90px;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.2) 0%, transparent 70%);
      border-radius: 50%;
      animation: pulse-glow 2.5s ease-in-out infinite;
    }
    
    @keyframes preloader-float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-10px); }
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    /* –°–∫—Ä—ã—Ç—å –ø—Ä–µ–ª–æ–∞–¥–µ—Ä –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ */
    .app-loaded .app-preloader {
      opacity: 0;
      pointer-events: none;
    }
  </style>
</head>
<body>
  <!-- –ü—Ä–µ–ª–æ–∞–¥–µ—Ä -->
  <div class="app-preloader" id="preloader">
    <div class="preloader-content">
      <div class="preloader-logo-container">
        <div class="preloader-logo">ü™Ü</div>
      </div>
      <div class="preloader-text">MatreshkaVPN</div>
      <div class="preloader-subtitle">üåü –ó–∞—â–∏—Ç–∞ —Å —Ä—É—Å—Å–∫–æ–π –¥—É—à–æ–π üåü</div>
      
      <!-- –í–∞—à–∞ PNG –∏–∫–æ–Ω–∫–∞ -->
      <div class="preloader-spinner">
        <div class="loading-glow"></div>
        <img src="/loading-icon.png" alt="Loading" class="loading-png" />
      </div>
    </div>
  </div>
  
  <!-- –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
  <div id="root"></div>
  
  <script>
    // –°–∫—Ä—ã—Ç–∏–µ –ø—Ä–µ–ª–æ–∞–¥–µ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
    window.addEventListener('load', function() {
      setTimeout(function() {
        document.body.classList.add('app-loaded');
        setTimeout(function() {
          const preloader = document.getElementById('preloader');
          if (preloader) {
            preloader.remove();
          }
        }, 500);
      }, 1000);
    });
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
    if (window.Telegram && window.Telegram.WebApp) {
      const tg = window.Telegram.WebApp;
      
      // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ viewport
      tg.ready();
      tg.expand();
      
      // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ–º—ã
      if (tg.colorScheme === 'dark') {
        document.documentElement.classList.add('dark');
      }
      
      // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –º–µ–Ω—é
      document.addEventListener('contextmenu', function(e) {
        e.preventDefault();
      });
      
      // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—ã–¥–µ–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞
      document.addEventListener('selectstart', function(e) {
        if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
          e.preventDefault();
        }
      });
      
      // –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∑—É–º–∞
      document.addEventListener('touchstart', function(event) {
        if (event.touches.length > 1) {
          event.preventDefault();
        }
      });
      
      let lastTouchEnd = 0;
      document.addEventListener('touchend', function(event) {
        const now = (new Date()).getTime();
        if (now - lastTouchEnd <= 300) {
          event.preventDefault();
        }
        lastTouchEnd = now;
      }, false);
      
      console.log('Telegram WebApp –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ');
    } else {
      console.warn('–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏');
    }
    
    // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
    window.addEventListener('error', function(e) {
      console.error('–û—à–∏–±–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:', e.error);
    });
    
    window.addEventListener('unhandledrejection', function(e) {
      console.error('–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ Promise:', e.reason);
    });
  </script>
  
  <script type="module" src="/src/main.tsx"></script>
</body>
</html>